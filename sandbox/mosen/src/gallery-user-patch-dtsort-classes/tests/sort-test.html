<!DOCTYPE html>
<html>
    <head>
        <title>Test for sort class selector problem</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="http://yui.yahooapis.com/3.3.0/build/yui/yui-min.js"
        charset="utf-8"></script>
    </head>
    <body class="yui3-skin-sam">
        <h2>Test DataTableSort class selector problem</h2>
        <p>The DataTableSort plugin highlights the sorted column after the sort has been made.
        The problem is that the selector for the rows does not work when DataTableScroll has been
        applied to the table instance, because the headings and the body are now distinctly different
        sections of the table.</p>
        <p><input type="button" value="Run Tests" id="btnRun" disabled=true></p>
        <script type="text/javascript">
        (function() {
            YUI({
                filter: (window.location.search.match(/[?&]filter=([^&]+)/) || [])[1] || 'min',
                allowRollup: false,
                   modules : {
                    'gallery-user-patch-dtsort-classes' : {
                       'fullpath' : '../../../build/gallery-user-patch-dtsort-classes/gallery-user-patch-dtsort-classes.js',
                       'requires' : ['datatable']
                    }
                }
            }).use("console", "test", "dump", "datatable", function(Y) {

                var BTNRUN = Y.one("#btnRun");
                BTNRUN.set("disabled", false);
                Y.on("click", function(e){
                    Y.Test.Runner.run();
                }, BTNRUN);
                var myConsole = new Y.Console().render();


                var testBasic = new Y.Test.Case({ 
                    name: "Patch DataTableSort Selector Test",
                    
                    setUp: function() {
                        this.mockresponse = {
                            response: {
                                results: [
                                    { "id" : "1", "name" : "Joe" },
                                    { "id" : "2", "name" : "Mark" },
                                    { "id" : "3", "name" : "Andrew" }
                                ]
                            }
                        };
                        
                        this.testDataTable = new Y.DataTable.Base({
                            columnset : [ 
                                { key:"id", sortable: true, title:"customtitle" },
                                { key:"name", sortable: true }
                            ],
                            summary : "User patched DataTable Instance",
                            recordset : this.mockresponse.response.results,
                            plugins : [ Y.Plugin.DataTableSort, Y.Plugin.DataTableScroll ]
                        });

                        this.testDataTable.render();
                    },
                    
                    tearDown: function() {
                        delete this.testDataTable;
                    },
                    
                    "test DataTableSort highlights correct column" : function() {
                    }

                });

                var suite = new Y.Test.Suite({name:"Patch DataTableSort Selector Test Suite"});
                suite.add(testBasic);

                Y.Test.Runner.setName("Test Runner");
                Y.Test.Runner.add(suite);
                Y.Test.Runner.run();
            });
        })();
        </script>
    </body>
</html>
