YUI.add("gallery-dp-timeline",function(d){var c=d.Lang,b=d.Node,a=d.DataType;d.namespace("DP").Timeline=d.Base.create("gallery-dp-timeline",d.Widget,[],{initializer:function(){},destructor:function(){},renderUI:function(){this._renderHeadings();this._renderHeadingsDays();this._renderBackgroundContainer();this._renderEventContainer();this._renderEvents();this.get("contentBox").append(this._nodeDayContainer);this.get("contentBox").append(this._nodeEventContainer);},bindUI:function(){},syncUI:function(){var e=this.get("events");console.dir(e);},_renderHeadings:function(){var e=b.create(d.substitute(this.get("tplDayContainer"),{className:this.getClassName("day","container")}));this._nodeDayContainer=e;},_renderHeadingsDays:function(){var f=this.get("date"),e,h;for(h=0;h<this.get("length");h++){e=new Date(f.getTime());e.setDate(e.getDate()+h);var g=b.create(d.substitute(this.get("tplDay"),{className:this.getClassName("day"),labelClassName:this.getClassName("day","label"),label:a.Date.format(e,{format:"%a %e"})}));g.set("style.left",this.dateToOffset(e)+"px");g.set("style.width",this.get("dayWidth")+"px");this._nodeDayContainer.append(g);}},_renderEventContainer:function(){this._nodeEventContainer=b.create(d.substitute(this.get("tplEventContainer"),{className:this.getClassName("event","container")}));},_renderEvents:function(){var e=this.get("date");this.clearDateTime(e);d.Array.each(this.get("events"),function(f){if(f.start<e){}else{this._renderEvent(f);}},this);},_renderEvent:function(h){var f=b.create(d.substitute(this.get("tplEvent"),{className:this.getClassName("event"),titleClassName:this.getClassName("event","title"),title:h.summary})),g=this.rangeToDuration(h.start,h.finish);f.set("style.left",this.dateToOffset(h.start)+"px");f.set("style.top",(h.overlap*this.get("eventHeight"))+"px");f.set("style.width",(this.get("dayWidth")*g)+"px");this._nodeEventContainer.append(f);},_renderBackgroundContainer:function(){var e=b.create(d.substitute(this.get("tplBackgroundContainer"),{className:this.getClassName("background")}));this.get("contentBox").append(e);},_renderBackgroundHighlights:function(){},dateToOffset:function(e){var h=1000*60*60*24,g=e.getTime()-this.get("date").getTime(),f=Math.floor(g/h);return f*this.get("dayWidth");},rangeToDuration:function(i,e){var h=1000*60*60*24,g=e.getTime()-i.getTime(),f=Math.ceil(g/h)+1;return f;},clearDateTime:function(e){e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e;},_calculateOverlaps:function(h,g){var f=Array();d.Array.each(g,function(e){if(h!==e){if((h.start>=e.finish||h.finish<=e.start)){}else{}}},this);},_nodeDays:Array()},{NAME:"timeline",ATTRS:{tplDayContainer:{value:'<div class="{className}"></div>'},tplDay:{value:'<div class="{className}"><span class="{labelClassName}">{label}</span></div>'},tplEventContainer:{value:'<div class="{className}"></div>'},tplEvent:{value:'<div class="{className}"><span class="{titleClassName}">{title}</span></div>'},tplBackgroundContainer:{value:'<div class="{className}"></div>'},dayWidth:{value:100},eventHeight:{value:20},date:{value:Date()},length:{value:8},events:{value:Array(),setter:function(f){var e=0;d.Array.each(f,function(g){if(c.isString(g.start)){g.start=a.Date.parse(g.start);}if(c.isString(g.finish)){g.finish=a.Date.parse(g.finish);}g.overlap=e;e++;},this);d.Array.each(f,function(g){this._calculateOverlaps(g,f);},this);}}},HTML_PARSER:{}});},"@VERSION@",{requires:["base","widget","substitute","node","datatype"]});